<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">

<script>Polymer({is:"iron-form","extends":"form",listeners:{"iron-form-element-register":"_registerElement",submit:"submit"},ready:function(){this._requestBot=document.createElement("iron-ajax"),this._requestBot.addEventListener("response",this._handleFormResponse.bind(this)),this._requestBot.addEventListener("error",this._handleFormError.bind(this)),this._customElements=[]},submit:function(e){if(!this._validate())return!1;var t=this.serialize();return this._requestBot.url=this.action,this._requestBot.method=this.method,this._requestBot.params=t,"POST"==this.method&&(this._requestBot.body=JSON.stringify(t)),this._requestBot.generateRequest(),this.fire("iron-form-submit",t),e&&e.preventDefault(),!1},serialize:function(){function e(e){s[e.name]?(Array.isArray(s[e.name])||(s[e.name]=[s[e.name]]),s[e.name].push(e.value)):s[e.name]=e.value}for(var t,s={},r=0;t=this._customElements[r],r<this._customElements.length;r++)t.name&&e(t);for(var t,r=0;t=this.elements[r],r<this.elements.length;r++)!t.name||!this._useValue(t)||t.hasAttribute("is")&&s[t.name]||e(t);return s},_handleFormResponse:function(e){this.fire("iron-form-response",e.detail.response)},_handleFormError:function(e){this.fire("iron-form-error",e.detail)},_registerElement:function(e){this._customElements.push(e.target)},_validate:function(){for(var e,t=!0,s=0;e=this._customElements[s],s<this._customElements.length;s++)t=e.validate()&&t;return t},_useValue:function(e){return"checkbox"!==e.type&&"radio"!==e.type?!0:e.checked}});</script>
</head><body></body></html>